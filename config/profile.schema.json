{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "profile.schema.json",
  "title": "pc-setup Profile",
  "description": "Profile file for pre-selecting items and overriding per-item settings.",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "$schema": {
      "type": "string"
    },
    "selectedIds": {
      "type": "array",
      "description": "IDs of items to pre-check in the Main Menu checklist. Replaces the default category-based pre-selection. The user can still toggle items before confirming.",
      "items": {
        "type": "string",
        "pattern": "^[a-z0-9]+\\.[a-z0-9]+$",
        "description": "Item ID in 'category.name' format (e.g. 'dev.vscode')."
      }
    },
    "overrides": {
      "type": "object",
      "description": "Per-item overrides keyed by item ID. For 'app' items: scope and override. For 'script' items: parameters.",
      "additionalProperties": {
        "$ref": "#/definitions/itemOverride"
      }
    }
  },
  "definitions": {
    "itemOverride": {
      "type": "object",
      "description": "Overridable fields for an item. 'scope' and 'override' apply to app items; 'parameters' applies to script items.",
      "additionalProperties": false,
      "minProperties": 1,
      "properties": {
        "scope": {
          "type": "string",
          "enum": ["machine", "user"],
          "description": "Override the install scope (app items only). 'machine' installs for all users; 'user' for the current user only."
        },
        "override": {
          "type": ["string", "null"],
          "description": "Override the raw installer argument string passed to winget via --override (app items only)."
        },
        "parameters": {
          "type": "object",
          "description": "Override parameters for script items. Merged with the catalog-defined parameters.",
          "additionalProperties": true
        }
      }
    }
  }
}
